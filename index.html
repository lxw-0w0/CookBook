<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TastyHub | 美食推荐</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
    <body>
<!-- 导航栏 -->
<nav class="navbar navbar-expand-lg">
    <div class="container">
        <a class="navbar-brand" href="#">
            <i class="bi bi-egg-fried"></i>
            <span>TastyHub</span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <!-- 左侧主导航 -->
            <ul class="navbar-nav me-auto align-items-center">
                <li class="nav-item">
                    <a class="nav-link upload-btn" href="#">首页</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link upload-btn" href="#ai-robot-section">智能食谱</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link upload-btn" href="community.html">美食社区</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link upload-btn" href="#" data-bs-toggle="modal" data-bs-target="#uploadRecipeModal">
                        <i class="bi bi-cloud-upload-fill me-1"></i> 上传菜谱
                    </a>
                </li>
            </ul>
            
            <!-- 右侧功能区（我的菜谱/我的收藏/登录）- 统一对齐 -->
            <div class="d-flex align-items-center gap-2">
                <!-- 我的菜谱 -->
                <li class="nav-item mb-0">
                    <a class="nav-link user-btn" href="#" data-bs-toggle="modal" data-bs-target="#myRecipesModal">
                        <i class="bi bi-book-fill me-1"></i> 我的菜谱
                    </a>
                </li>
                <!-- 我的收藏 -->
                <a href="#" class="nav-link user-btn" data-bs-toggle="modal" data-bs-target="#collectModal">
                    <i class="bi bi-bookmark-heart-fill me-1"></i> 我的收藏
                </a>
                <!-- 登录按钮 -->
                <button class="nav-link user-btn" id="show-login-btn" data-bs-toggle="modal" data-bs-target="#loginModal">
                    <i class="bi bi-person-circle me-1"></i> 登录
                </button>
                <!-- 用户信息 -->
                <div class="d-none align-items-center ms-2" id="user-info">
                    <span class="text-dark me-2" id="current-username">用户名</span>
                    <button class="btn btn-outline-warning btn-sm" id="logout-btn">退出</button>
                </div>
            </div>
        </div>
    </div>
</nav>
<!-- 美食社区板块 -->
<div class="community-section container mt-5 d-none" id="community-section">
    <div class="d-flex justify-content-between align-items-center mb-5">
        <h2 class="section-title">
            <i class="bi bi-people-fill me-2"></i> 美食社区 · 分享你的拿手菜
        </h2>
        <button class="btn nav-btn" id="publish-post-btn" data-bs-toggle="modal" data-bs-target="#publishPostModal" style="display: none;">
            <i class="bi bi-pencil-fill me-1"></i> 发布帖子
        </button>
    </div>

    <div class="bg-white p-3 rounded-3 shadow-sm mb-4">
        <div class="d-flex flex-wrap gap-2">
            <button class="btn btn-sm btn-warning active" data-filter="all">全部帖子</button>
            <button class="btn btn-sm btn-outline-warning" data-filter="家常菜">家常菜</button>
            <button class="btn btn-sm btn-outline-warning" data-filter="减脂餐">减脂餐</button>
            <button class="btn btn-sm btn-outline-warning" data-filter="甜品">甜品</button>
            <button class="btn btn-sm btn-outline-warning" data-filter="烘焙">烘焙</button>
        </div>
    </div>

    <div class="posts-container" id="posts-container">
        <!-- 动态加载帖子 -->
    </div>
</div>

<!-- 发布帖子模态框 -->
<div class="modal fade" id="publishPostModal" tabindex="-1" aria-labelledby="publishPostModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="publishPostModalLabel">
                    <i class="bi bi-pencil-fill text-warning me-2"></i> 发布美食帖子
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label for="post-title" class="form-label fw-medium">帖子标题</label>
                    <input type="text" class="form-control" id="post-title" placeholder="比如：我的秘制红烧肉做法">
                </div>
                <div class="mb-3">
                    <label for="post-category" class="form-label fw-medium">帖子分类</label>
                    <select class="form-select" id="post-category">
                        <option value="家常菜">家常菜</option>
                        <option value="减脂餐">减脂餐</option>
                        <option value="甜品">甜品</option>
                        <option value="烘焙">烘焙</option>
                        <option value="其他">其他</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label for="post-content" class="form-label fw-medium">帖子内容</label>
                    <textarea class="form-control" id="post-content" rows="6" placeholder="分享你的菜谱、烹饪技巧、美食心得..."></textarea>
                </div>
                <div class="mb-3">
                    <label for="post-img" class="form-label fw-medium">上传美食图片（可选）</label>
                    <input type="file" class="form-control" id="post-img" accept="image/*">
                </div>
            </div>
            <div class="modal-footer border-0">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                <button type="button" class="btn btn-warning" id="submit-post-btn">
                    <i class="bi bi-check-circle me-1"></i> 发布帖子
                </button>
            </div>
        </div>
    </div>
</div>
<!-- 上传菜谱模态框 -->
<div class="modal fade" id="uploadRecipeModal" tabindex="-1" aria-labelledby="uploadRecipeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="uploadRecipeModalLabel">
                    <i class="bi bi-cloud-upload-fill text-warning me-2"></i> 上传我的菜谱
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="upload-form-container">
                    <div class="mb-3">
                        <label for="recipe-title" class="form-label fw-medium">菜谱名称</label>
                        <input type="text" class="form-control" id="recipe-title" placeholder="例如：家常红烧肉">
                    </div>
                    <div class="mb-3">
                        <label for="recipe-img" class="form-label fw-medium">上传菜谱图片</label>
                        <input type="file" class="form-control" id="recipe-img" accept="image/*">
                    </div>
                    <div class="mb-3">
                        <label for="recipe-ingredients" class="form-label fw-medium">食材清单</label>
                        <textarea class="form-control" id="recipe-ingredients" rows="4" placeholder="请输入食材清单，每行一种食材"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="recipe-steps" class="form-label fw-medium">烹饪步骤</label>
                        <textarea class="form-control" id="recipe-steps" rows="6" placeholder="请输入详细烹饪步骤，每行一步"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="recipe-time" class="form-label fw-medium">烹饪时长（分钟）</label>
                        <input type="number" class="form-control" id="recipe-time" placeholder="例如：40">
                    </div>
                </div>
            </div>
            <div class="modal-footer border-0">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                <button type="button" class="btn btn-warning" id="submit-recipe-btn">
                    <i class="bi bi-check-circle me-1"></i> 提交菜谱
                </button>
            </div>
        </div>
    </div>
</div>

<!-- 我的菜谱模态框 -->
<div class="modal fade" id="myRecipesModal" tabindex="-1" aria-labelledby="myRecipesModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="myRecipesModalLabel">
                    <i class="bi bi-book-fill text-warning me-2"></i> 我的菜谱
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id="myRecipesList">
                    <div class="collect-empty">
                        <i class="bi bi-book"></i>
                        <h4>暂无上传的菜谱</h4>
                        <p class="text-muted">快去上传你的独家菜谱吧～</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 登录/注册模态框 -->
<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">用户登录 / 注册</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <ul class="nav nav-tabs mb-3" id="authTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="login-tab" data-bs-toggle="tab" data-bs-target="#login-pane" type="button" role="tab">登录</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="register-tab" data-bs-toggle="tab" data-bs-target="#register-pane" type="button" role="tab">注册</button>
                    </li>
                </ul>
                <div class="tab-content" id="authTabContent">
                    <div class="tab-pane fade show active" id="login-pane" role="tabpanel">
                        <div class="mb-3">
                            <label for="login-username" class="form-label">用户名</label>
                            <input type="text" class="form-control" id="login-username" placeholder="请输入用户名">
                        </div>
                        <div class="mb-3">
                            <label for="login-password" class="form-label">密码</label>
                            <input type="password" class="form-control" id="login-password" placeholder="请输入密码">
                        </div>
                        <div class="text-danger small mb-2" id="login-error"></div>
                        <button class="btn btn-warning w-100" id="login-btn">登录</button>
                    </div>
                    <div class="tab-pane fade" id="register-pane" role="tabpanel">
                        <div class="mb-3">
                            <label for="register-username" class="form-label">用户名</label>
                            <input type="text" class="form-control" id="register-username" placeholder="请设置用户名">
                        </div>
                        <div class="mb-3">
                            <label for="register-password" class="form-label">密码</label>
                            <input type="password" class="form-control" id="register-password" placeholder="请设置密码（不少于6位）">
                        </div>
                        <div class="mb-3">
                            <label for="register-repassword" class="form-label">确认密码</label>
                            <input type="password" class="form-control" id="register-repassword" placeholder="请再次输入密码">
                        </div>
                        <div class="text-danger small mb-2" id="register-error"></div>
                        <button class="btn btn-warning w-100" id="register-btn">注册</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 头部区域 -->
<header class="hero-section position-relative">
    <div class="hero-bg"></div>
    <div class="hero-content container">
        <h1 class="fw-bold mb-3">今天吃点什么？</h1>
        <p class="lead text-muted mb-5">在这里，解锁更多美味灵感。发现、分享、创造，让每一餐都充满惊喜！</p>
        
        <div class="search-source-tabs d-flex justify-content-center gap-3 mb-4">
            <div class="btn-group" role="group">
                <input type="radio" class="btn-check" name="source-btn" id="source-global" autocomplete="off" checked onchange="switchSource('global')">
                <label class="btn btn-outline-warning fw-bold px-4" for="source-global">
                    <i class="bi bi-globe"></i> 全球食谱
                </label>
        
                <input type="radio" class="btn-check" name="source-btn" id="source-cn" autocomplete="off" onchange="switchSource('chinese')">
                <label class="btn btn-outline-warning fw-bold px-4" for="source-cn">
                    <i class="bi bi-fire"></i> 中式精选
                </label>
            </div>
        </div>

        <div class="search-wrapper">
            <div class="search-container">
                <i class="bi bi-search"></i>
                <input 
                    id="search-input" 
                    class="form-control" 
                    type="text" 
                    placeholder="试试搜：牛肉, 冰淇淋, 汉堡..."
                >
            </div>
            <button id="search-btn">
                搜索食谱
                <span class="shine-effect"></span>
            </button>
        </div>
        
        <div class="trending-tags">
            <div id="tags-global">
                <span class="text-muted">热门搜索：</span>
                <a href="javascript:;" class="text-dark">牛肉</a>
                <a href="javascript:;" class="text-dark">汉堡</a>
                <a href="javascript:;" class="text-dark">鸡肉</a>
                <a href="javascript:;" class="text-dark">猪肉</a>
                <a href="javascript:;" class="text-dark">鱼</a>
                <a href="javascript:;" class="text-dark">蛋糕</a>
                <a href="javascript:;" class="text-dark">冰淇淋</a>
            </div>

            <div id="tags-cn" class="d-none">
                <span class="text-muted">中式热搜：</span>
                <a href="javascript:;" class="text-dark">红烧肉</a>
                <a href="javascript:;" class="text-dark">宫保鸡丁</a>
                <a href="javascript:;" class="text-dark">糖醋排骨</a>
                <a href="javascript:;" class="text-dark">麻婆豆腐</a>
                <a href="javascript:;" class="text-dark">清蒸鱼</a>
                <a href="javascript:;" class="text-dark">土豆丝</a>
            </div>
        </div>
    </div>
</header>

<!-- 主内容区 -->
<div class="main-container">
<!-- 主内容区 -->
<div class="main-container">
    <!-- 左侧食谱区 -->
    <div class="recipe-section">
        <h2 class="section-title">
            <i class="bi bi-utensils me-2"></i> 搜索结果
        </h2>
        <div class="recipe-container" id="recipe-container">
            <!-- 食谱卡片会通过JS动态生成 -->
        </div>

        <!-- 新增：占位符分隔区 -->
        <div class="placeholder-divider my-5">
            <div class="d-flex align-items-center justify-content-center gap-3">
                <div class="flex-grow-1 border-top border-warning opacity-50"></div>
                <div class="text-warning fw-medium">
                    <i class="bi bi-geo-alt me-1"></i> 附近美食推荐
                </div>
                <div class="flex-grow-1 border-top border-warning opacity-50"></div>
            </div>
            <div class="text-center text-muted small mt-3">
                基于你的位置，为你推荐周边优质餐饮商家
            </div>
        </div>

        <!-- 餐厅列表模块（样式与食谱列表一致） -->
        <h2 class="section-title">
            <i class="bi bi-map-marker me-2"></i> 附近餐厅
        </h2>
        <div class="recipe-container" id="restaurant-list">
            <div class="collect-empty">
                <i class="bi bi-map-marker"></i>
                <h4>暂无附近餐厅信息</h4>
            </div>
        </div>
    </div>

    <!-- 右侧功能区 - 添加AI机器人区域的锚点 -->
    <div class="sidebar" id="ai-robot-section">
        <!-- AI智能大厨 -->
        <div class="sidebar-card">
            <div class="sidebar-card-header yellow">
                <i class="bi bi-robot"></i> AI 智能大厨
            </div>
            <div class="sidebar-card-body">
                <div id="chat-history">
                    <div class="message message-ai">
                        👨‍🍳 你好！我是你的AI大厨，有什么烹饪问题都可以问我！无论是食材搭配、烹饪技巧还是食谱推荐，我都能解答～
                    </div>
                </div>
                <div class="ai-input-group">
                    <input type="text" id="ai-input" placeholder="比如：红烧肉怎么做才不腻？">
                    <button id="ai-btn">
                        <i class="bi bi-send"></i> 发送
                    </button>
                </div>
            </div>
        </div>


        <!-- 和风天气卡片 -->

<div class="sidebar-card">
    <div class="sidebar-card-header yellow">
        <i class="bi bi-cloud-sun"></i> 天气查询
    </div>
    <div class="sidebar-card-body">
        <!-- 查询输入部分 -->
        <div class="mb-3">
            <label for="city-input" class="form-label small fw-medium">查询城市</label>
            <div class="input-group">
                <input type="text" id="city-input" class="form-control" placeholder="例如：北京">
                <button class="btn btn-outline-warning btn-sm" id="weather-btn">查询</button>
            </div>
        </div>
        
        <!-- 自动定位开关 -->
        <div class="form-check form-switch mt-2 mb-3">
            <input class="form-check-input" type="checkbox" id="auto-location-switch" checked>
            <label class="form-check-label small text-muted" for="auto-location-switch">
                自动获取位置显示天气
            </label>
            <div class="small text-muted">开启后，页面将尝试获取您的位置自动显示天气</div>
        </div>
        
        <!-- 天气结果显示部分 -->
        <div id="weather-result" class="weather-result-container weather-card mt-3 p-3 rounded-3 d-none">
            <!-- 城市和刷新 -->
            <div class="weather-header d-flex justify-content-between align-items-start mb-3">
                <div>
                    <div class="d-flex align-items-center">
                        <i class="bi bi-geo-alt-fill text-warning fs-5 me-2"></i>
                        <h5 class="weather-city fw-bold mb-0" id="weather-location">加载中...</h5>
                    </div>
                    <div class="weather-update-time text-muted small mt-1" id="weather-update-time"></div>
                </div>
                <button class="weather-refresh btn btn-sm btn-outline-warning" id="weather-refresh-btn" title="刷新">
                    <i class="bi bi-arrow-clockwise"></i>
                </button>
            </div>

            <!-- 主要天气信息 -->
            <div class="weather-main text-center mb-3">
                <div class="weather-icon-container mb-2" id="weather-icon-container">
                    <!-- 图标由JS动态生成 -->
                </div>
                <div class="weather-temperature display-4 fw-bold" id="weather-temp">--</div>
                <div class="weather-description fs-5 text-muted" id="weather-desc">--</div>
            </div>

            <!-- 详细信息网格 -->
            <div class="weather-details-grid row g-2 text-center">
                <div class="col-4">
                    <div class="weather-detail-item p-2 rounded bg-light">
                        <i class="bi bi-droplet-half d-block text-primary mb-1"></i>
                        <div class="weather-detail-label small text-muted">湿度</div>
                        <div class="weather-detail-value fw-bold" id="weather-humidity">--%</div>
                    </div>
                </div>
                <div class="col-4">
                    <div class="weather-detail-item p-2 rounded bg-light">
                        <i class="bi bi-wind d-block text-info mb-1"></i>
                        <div class="weather-detail-label small text-muted">风力</div>
                        <div class="weather-detail-value fw-bold" id="weather-wind">--级</div>
                    </div>
                </div>
                <div class="col-4">
                    <div class="weather-detail-item p-2 rounded bg-light">
                        <i class="bi bi-thermometer-half d-block text-danger mb-1"></i>
                        <div class="weather-detail-label small text-muted">体感</div>
                        <div class="weather-detail-value fw-bold" id="weather-feelslike">--°C</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


        <!-- BMI计算器 -->
        <div class="sidebar-card">
            <div class="sidebar-card-header green">
                <i class="bi bi-calculator"></i> BMI 健康计算
            </div>
            <div class="sidebar-card-body">
                <input type="number" id="bmi-height" placeholder="身高 (cm)">
                <input type="number" id="bmi-weight" placeholder="体重 (kg)">
                <button id="bmi-btn">计算 BMI</button>
                <div id="bmi-result" class="mt-3 d-none"></div>
            </div>
        </div>
    </div>
</div>

<!-- 食谱详情模态框 -->
<div class="modal fade" id="recipeModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modal-title"></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <img id="modal-img" class="modal-img" src="" alt="食谱图片">
                <h6 class="fw-bold mb-2">食材清单：</h6>
                <ul id="modal-ingredients" class="list-unstyled"></ul>
                
                <h6 class="fw-bold mb-2 mt-4">烹饪步骤：</h6>
                <div id="modal-instructions"></div>
            </div>
        </div>
    </div>
</div>

<!-- 收藏列表模态框 -->
<div class="modal fade" id="collectModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="bi bi-bookmark-heart-fill text-warning me-2"></i> 我的收藏食谱
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id="collectList">
                    <div class="collect-empty">
                        <i class="bi bi-bookmark-heart"></i>
                        <h4>暂无收藏的食谱</h4>
                        <p class="text-muted">快去收藏你喜欢的食谱吧～</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 自定义提示框 -->
<div id="customAlert" class="custom-alert">
    <i class="bi bi-info-circle"></i>
    <span id="alert-text"></span>
</div>



<!-- Bootstrap JS -->
<script src="https://cdn.bootcdn.net/ajax/libs/blueimp-md5/2.19.0/js/md5.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="script.js"></script>
</body>
</html>